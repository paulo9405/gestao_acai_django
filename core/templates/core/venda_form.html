{% extends "base.html" %}
{% load bootstrap %}


{% block menu %}
    <ul class="nav nav-tabs">
        <li class="nav-item">
            <a class="nav-link" href="{% url 'core_dashboard' %}">Dashboard</a>
        </li>

        <li class="nav-item">
            <a class="nav-link active" href="{% url 'core_venda_create' %}">Cadastrar venda</a>
        </li>

        <li class="nav-item">
            <a class="nav-link" href="{% url 'core_venda_lista' %}">Lista de vendas</a>
        </li>

		<li class="nav-item">
            <a class="nav-link" href="{% url 'core_colaboradores_list' %}">Lista de colaboradores</a>
        </li>

		{% if user.is_authenticated %}
            <li class="nav-item">
                    <a class="nav-link disabled" href="">Ola, {{ user }}</a>
            </li>

            <li class="nav-item">
                    <a class="nav-link" href="{% url 'logout' %}">Sair</a>
            </li>
        {% else %}
            <li class="nav-item">
                <a class="nav-link" href="{% url 'login' %}">Entrar</a>
            </li>
        {% endif %}
    </ul>

{% endblock %}

{% block main %}
<br>
<div class="container">
	<div class="col-12 font-weight-bold text-center text-uppercase p-3 mb-2 bg-info text-white">
        <h2> Cadastro de Vendas </h2>
	</div>
	<form action="{% url 'core_venda_create' %}" method="POST">
		<br>
		{% csrf_token %}
		<div class="form-row font-weight-bold text-info">
    <div class="col-md-6 mb-3">
        <label for="id_dia_da_venda">Dia da venda ex: dia/mes/ano</label>
        
        <!-- üîπ Campo da data + bot√£o "Usar data de hoje" -->
        <div class="input-group">
            <input type="date" 
                   name="dia_da_venda" 
                   class="form-control" 
                   id="id_dia_da_venda" 
                   placeholder="Dia da venda" 
                   required>
            <div class="input-group-append">
                <button type="button" id="hoje-btn" class="btn btn-outline-secondary">
                    Usar data de hoje
                </button>
            </div>
        </div>
    </div>
    
    <div class="col-md-6 mb-3 font-weight-bold">
        <label for="id_quantidade_entregas">Entregas</label>
        <input type="text" name="quantidade_entregas" class="form-control" id="id_quantidade_entregas" placeholder="Entregas" required>
    </div>
</div>

		<div class="form-row text-info">
			<div class="col-md-6 mb-3 font-weight-bold ">
				<label for="id_venda_dinheiro">Venda Dinheiro</label>
				<input type="text" name="venda_dinheiro" class="form-control" id="validationDefault03" placeholder="Dinheiro" required>
			</div>
			<div class="col-md-6 mb-3 font-weight-bold">
				<label for="id_venda_cartao">Venda Cart√£o</label>
				<input type="text" name="venda_cartao" class="form-control" id="validationDefault03" placeholder="Cart√£o" required>
			</div>
		</div>
		<div class="form-row font-weight-bold text-info">
			<div class="col-md-6 mb-3">
				<label for="id_compras">Compras</label>
				<input type="text" name="compras" class="form-control" id="validationDefault03" placeholder="Compras" required>
			</div>
			<div class="col-md-6 mb-3 font-weight-bold">
				<label for="id_descricao_compras">Descri√ß√£o</label>
				<input type="text" name="descricao_compras" class="form-control" id="validationDefault03" placeholder="Descri√ß√£o de compras" required>
			</div>
		</div>
		<div class="form-row text-info">
			<div class="col-md-6 mb-3 font-weight-bold">
				<label for="id_despesas">Despesas</label>
				<input type="text" name="despesas" class="form-control" id="validationDefault03" placeholder="Despesas" required>
			</div>
			<div class="col-md-6 mb-3 font-weight-bold">
				<label for="id_descricao_despesas">Descri√ß√£o</label>
				<input type="text" name="descricao_despesas" class="form-control" id="validationDefault03" placeholder="Descri√ß√£o de despesas" required>
			</div>
		</div>
		<button type="submit" class="btn btn-primary font-weight-bold">Cadastrar Venda</button>
	</form>

</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const btnHoje = document.getElementById('hoje-btn');
  const campoData = document.getElementById('id_dia_da_venda');

  btnHoje.addEventListener('click', () => {
    const hoje = new Date();
    const yyyy = hoje.getFullYear();
    const mm = String(hoje.getMonth() + 1).padStart(2, '0');
    const dd = String(hoje.getDate()).padStart(2, '0');
    campoData.value = `${yyyy}-${mm}-${dd}`;
  });
});
</script>


{% endblock  %}
